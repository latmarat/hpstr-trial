<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>ABAQUS volumetric mesh from Dream.3D surface mesh &#8211; research blog</title>
<meta name="description" content="The post describes a MATLAB script for obtaining ABAQUS tetrahedral volume mesh from surface mesh of grain boundaries generated in Dream.3D.">
<meta name="keywords" content="dream.3d, abaqus, matlab">



<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="ABAQUS volumetric mesh from Dream.3D surface mesh">
<meta property="og:description" content="The post describes a MATLAB script for obtaining ABAQUS tetrahedral volume mesh from surface mesh of grain boundaries generated in Dream.3D.">
<meta property="og:url" content="/dream2abatet/">
<meta property="og:site_name" content="research blog">





<link rel="canonical" href="/dream2abatet/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="research blog Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post" >

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="/">Home</a></li>
		<li>
			<a href="#">The author</a>
			<ul class="dl-submenu">
				<li>
					<img src="/images/avatar.jpg" alt="Marat I. Latypov photo" class="author-photo">
					<h4>Marat I. Latypov</h4>
					<p>Materials Scientist at Georgia Tech Lorraine.</p>
				</li>
				<li><a href="/about"><span class="btn btn-inverse">Learn More</span></a></li>
				<li>
					<a href="mailto:marat.latypov@georgiatech-metz.fr"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				
				
				
				<li>
					<a href="https://linkedin.com/in/latmarat"><i class="fa fa-fw fa-linkedin"></i> LinkedIn</a>
				</li>
				
				
				
				
				
				<li>
					<a href="https://www.researchgate.net/profile/Marat_Latypov"><i class="ai ai-researchgate"></i> ResearchGate</a>
				</li>
					<li>
					<a href="https://scholar.google.com/citations?user=
					We5aJywAAAAJ&hl=en&oi=ao"><i class="ai ai-google-scholar"></i> Google Scholar</a>
				</li>
			</ul><!-- /.dl-submenu -->
		</li>
		<li><a href="/posts/">All Posts</a></li>
		<li><a href="/tags/">All Tags</a></li>
		
	    
	    <li><a href="/about/" >About</a></li>
	  
	    
	    <li><a href="/portfolio/" >Portfolio</a></li>
	  
	    
	    <li><a href="http://latmarat.net" target="_blank">Landing Page</a></li>
	  
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->




<div id="main" role="main">
  <article class="hentry">
    <header class="header-title">
      <div class="header-title-wrap">
        
          <h1 class="entry-title"><a href="/dream2abatet/" rel="bookmark" title="ABAQUS volumetric mesh from Dream.3D surface mesh">ABAQUS volumetric mesh from Dream.3D surface mesh</a></h1>
        
        <h2><span class="entry-date date published"><time datetime="2016-01-18T00:00:00+01:00">January 18, 2016</time></span></h2>
        
        <p class="entry-reading-time">
          <i class="fa fa-clock-o"></i>
          
Reading time ~3 minutes
        </p><!-- /.entry-reading-time -->
        
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">
      <p>The post describes a MATLAB script for obtaining ABAQUS tetrahedral volume mesh from surface mesh of grain boundaries generated in Dream.3D.</p>

<h1 id="intro">Intro</h1>

<p>In the <a href="http://latmarat.net/blog/dream2abahex/">previous post</a>, I described a MATLAB script to write hexahedral ABAQUS mesh for a microstructure generated in Dream.3D. Brick elements make for a good mesh quality and thus a decent numerical stability of finite element simulations. At the same time, the use of brick elements inevitably leads to ladder-shaped grain boundaries.</p>

<p>Sometimes, it is desired to include the effect of the intricate curvature of grain boundaries in finite element simulations. For example, with realistic grain boundaries incorporated in the finite element models, it is possible to track the evolution of grain boundary facet normals or even grain boundary character disribution during plastic deformation (see <a href="http://dx.doi.org/10.1016/j.cma.2014.05.003"><em>Knezevic et al., 2014</em></a>).</p>

<p>Dream.3D currently allows for meshing grain boundaries by triangular elements (see <a href="http://dx.doi.org/10.1088/0965-0393/22/2/025017"><em>Lee et al., 2014</em></a> for details). It is often a challenge to produce volume mesh from surface mesh of grain boundaries, which may require commercial software.</p>

<p>This post describes an alternative method based on an open-source MATLAB toolbox for grain boundary-conformed mesh generation. The described method requires running a single MATLAB script that writes mesh into a text file that can be readily imported in ABAQUS.</p>

<h2 id="the-script">The script</h2>

<p>The MATLAB script presented here does the following:</p>

<ul>
  <li>Reads nodes, triangles of surface mesh and feature centroids generated in <a href="http://dream3d.bluequartz.net/">Dream.3D</a> (ver. 4.2.x)</li>
  <li>Generates volume tetrahedral mesh using <a href="http://iso2mesh.sf.net">iso2mesh</a> toolbox</li>
  <li>Writes the generated mesh into a file in ABAQUS input file format</li>
</ul>

<p><img src="https://farm1.staticflickr.com/678/22464316136_3b726c739e_o_d.png" alt="Surface to volume" />
<img src="https://farm6.staticflickr.com/5768/22476919562_704bd12470_o_d.png" alt="ABAQUS mesh" /></p>

<h2 id="usage">Usage</h2>

<p>To use the script, do the following:</p>

<ol>
  <li>Download <a href="http://iso2mesh.sf.net">iso2mesh</a> toolbox and add it to MATLAB path</li>
  <li><a href="https://github.com/latmarat/dream2abatet/archive/master.zip">Download <code class="highlighter-rouge">dream2abatet.m</code></a> script and put it to a MATLAB folder</li>
  <li>Run Dream.3D pipeline to write nodes, triangles, features files</li>
  <li>Run <code class="highlighter-rouge">dream2abatet.m</code> script pointing to the three Dream.3D files</li>
</ol>

<h2 id="example">Example</h2>

<p><a href="https://github.com/latmarat/dream2abatet">My repository</a> for <code class="highlighter-rouge">dream2abatet</code> script contains a set of example files for testing and getting familiar with the framework. The files that can be used for a test run of the script are</p>

<ul>
  <li>ex_nodes.in</li>
  <li>ex_tri.in</li>
  <li>ex_features.in</li>
</ul>

<p>You can use them to generate your first mesh as follows</p>

<ol>
  <li>Download the repo, extract the files to a MATLAB folder.</li>
  <li>Run</li>
</ol>

<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="n">dream2abatet</span><span class="p">(</span><span class="s1">'ex_nodes.in'</span><span class="p">,</span><span class="s1">'ex_tri.in'</span><span class="p">,</span><span class="s1">'ex_features.csv'</span><span class="p">,</span><span class="mf">0.75</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="nb">true</span><span class="p">)</span></code></pre></figure>

<p>in MATLAB and you should get a file <code class="highlighter-rouge">dream.inp</code> containing your mesh. Check it in ABAQUS/CAE by setting colors in the Viewer according to Sets. The result should look like the image above.</p>

<p>The repository also contains an example Dream.3D (ver. 4.2.5) pipeline - <code class="highlighter-rouge">ex_pipe.txt</code>, which writes the <code class="highlighter-rouge">ex_nodes.in</code>, <code class="highlighter-rouge">ex_tri.in</code>, <code class="highlighter-rouge">ex_features.csv</code> files for a 32x32x32 single-phase microstructure grid.</p>

<p class="notice"><strong>Tip</strong>: Both Dream.3D and iso2mesh allow for smoothing of the surface mesh. Furthermore, the function of <code class="highlighter-rouge">iso2mesh</code> toolbox responsible for the mesh generation takes several parameters as input, such as <code class="highlighter-rouge">keepRatio</code> and <code class="highlighter-rouge">maxVolElement</code> – the number of surface elements to be preserved during volume mesh generation and the maximum volume of the tetrahedral element (set as 0.75 and 0.5 in the example above). You can go through the documentation of both software packages to get familiar with the meshing and smoothing parameters as well as to experiment with them until a satisfactory mesh quality is achieved.</p>

<h2 id="known-limitations">Known limitations</h2>

<ol>
  <li>The script requires grain centroids. The only option to export centroids in Dream.3D ver. 4.2.x seems to be Write Goal Attributes in <em>Pack Primary Phases</em> filter. Since the generated microstructure does not necessarily match the goal attributes exactly, some grains may be missing in ABAQUS sets.</li>
  <li>The workflow does not work well with periodic boundaries set in Dream.3D: either generation of volume mesh will fail or the number of missing grains in ABAQUS sets will increase.</li>
  <li>Generation of volume mesh may fail for some microstructures (Invalid PLC error). In such cases, rerun Dream.3D pipeline and try again or try different Dream.3D settings.</li>
  <li>No information on phases will be passed to ABAQUS in the current version of the script.</li>
</ol>

      <footer class="entry-meta">
        <span class="entry-tags"><a href="/tags/#dream.3d" title="Pages tagged dream.3d" class="tag"><span class="term">dream.3d</span></a><a href="/tags/#abaqus" title="Pages tagged abaqus" class="tag"><span class="term">abaqus</span></a><a href="/tags/#matlab" title="Pages tagged matlab" class="tag"><span class="term">matlab</span></a></span>
        <span>Updated on <span class="entry-date date updated"><time datetime="2016-01-18">January 18, 2016</time></span></span>
        <span class="author vcard"><span class="fn">Marat I. Latypov</span></span>
        
      </footer>
    </div><!-- /.entry-content -->
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
    <div class="read-more">
  
    <div class="read-more-header">
      <a href="/dream2abahex/" class="read-more-btn">Read More</a>
    </div><!-- /.read-more-header -->
    <div class="read-more-content">
      <h3><a href="/emi-info/" title="My talk on quantification of EBSD datasets">My talk on quantification of EBSD datasets</a></h3>
      <p>Slides presented at EMI-2016 conference (Metz, France), October 2016. <a href="/emi-info/">Continue reading</a></p>
    </div><!-- /.read-more-content -->
  
  <div class="read-more-list">
    
      <div class="list-item">
        <h4><a href="/slides/emi-slides/" title="EBSD data analytics for quantification of UFG microstructures">EBSD data analytics for quantification of UFG microstructures</a></h4>
        <span>Published on November 14, 2016</span>
      </div><!-- /.list-item -->
    
      <div class="list-item">
        <h4><a href="/ppt2reveal/" title="How to make an easy transition from PowerPoint to reveal.js">How to make an easy transition from PowerPoint to reveal.js</a></h4>
        <span>Published on August 26, 2016</span>
      </div><!-- /.list-item -->
    
  </div><!-- /.read-more-list -->
</div><!-- /.read-more -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2017 Marat I. Latypov. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/hpstr-jekyll-theme/" rel="nofollow">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61278008-2', 'auto');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>



<script type="text/javascript"
    src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'latmarat'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



</body>
</html>
